#!/bin/sh

set -e

error () { echo "Error: $1" >&2; exit 1; }
status () { echo "$1" >&2; }

out_dir=$(spoc1 "$@")
[ $out_dir ] || exit

#count=$(ls *.config|wc -l)
#status "Processing code for $count devices"
for config in $out_dir/*.config; do
    base=$(basename $config .config)
    rules="$out_dir/$base.rules"
    spoc2 $rules $config $out_dir/$base
done
#status Finished
